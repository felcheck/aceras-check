# Aceras Check PRD (2025-11-12)

> Source: migrated from `CLAUDE.md` to honor Agent-Orchestrator workflow. Treat this as the living product brief for all personas.

## 0. Status + Focus
- **Status**: In Development
- **Pilot Areas**: Bella Vista Viejo & El Cangrejo, Panama City

---

## 1. Project Overview

### Mission
Create a crowdsourced walkability rating tool for Panama City to:
- Document pedestrian infrastructure conditions
- Prioritize which sidewalks/areas need fixing first
- Generate data where official/OSM data is lacking
- Support a not-for-profit community project

### Target Neighborhoods (Pilot)
1. **Bella Vista Viejo** – Calle 42-47, Zona de Calle Uruguay
2. **El Cangrejo** – Vía España, Transístmica, Av. Manuel Espinosa, Vía Brasil boundary

### Key Problem Statement
Panama City has severe walkability issues:
- 32.45% of pedestrian network is fragmented
- Business encroachments are #1 cause of obstruction
- Sidewalks used for parking and suffer poor maintenance
- 46.79% of bus stop distances to crossings exceed 100m
- Limited OpenStreetMap pedestrian data in LATAM

---

## 2. User Personas

### Primary: The Mapper
- Local resident or volunteer
- Walks through neighborhoods, reports conditions in real time
- Captures ratings, photos, observations, GPS location

### Secondary: Data Consumer
- City planners, advocacy groups, researchers
- Views aggregated walkability scores
- Identifies priority areas for intervention/investment

---

## 3. Core Features (v1 – MVP)

### 3.1 Mapper App Functionality
- [x] Map-based interface showing current location
- [ ] Drop pins on problematic areas
- [ ] Report types:
  - Missing sidewalk
  - Narrow sidewalk
  - Broken pavement
  - Obstruction (vehicles, vendors, construction, business encroachment)
  - Missing crossing
  - Poor lighting
  - Safety concern
  - Accessibility issue
  - Positive feedback
- [ ] Quick ratings (1-5 stars): condition, width, safety, lighting, accessibility
- [ ] Photo upload
- [ ] Location auto-capture (GPS)
- [ ] Address geocoding/search

### 3.2 Visualization/Dashboard
- [ ] List view of all reports
- [ ] Filter by neighborhood, issue type
- [ ] Prioritization ranking (areas to fix first)

### 3.3 Data Export
- [ ] CSV export for analysis
- [ ] Optional: contribute back to OSM (post-MVP)

---

## 4. Technical Architecture

### Frontend
- Next.js (App Router) with TailwindCSS; PWA-like UX for mobile

### Database
- InstantDB for realtime sync, simple permissions, file storage

### Mapping
- Leaflet + React-Leaflet, OpenStreetMap tiles (no API key)
- Nominatim API for geocoding
- Browser Geolocation API for GPS

### Hosting
- Vercel (great fit for Next.js)

---

## 5. Geolocation Map Application Implementation Plan

### High-Level Architecture
- Map: Leaflet + React-Leaflet
- Tiles: OpenStreetMap
- Geocoding: Nominatim
- Geolocation: Browser API
- Data: InstantDB (reports + files)

### Phase Guide
1. **Dependencies (✅)** – `leaflet`, `react-leaflet`, `@types/leaflet`
2. **InstantDB Schema (✅)** – `reports`, `neighborhoods`, `$files` links
3. **Component Scaffold** – `MapView`, `AddReportForm`, `ReportDetails`, `AddressSearch`, `PhotoUpload`, `ReportList`
4. **Phase 1 (✅)** – base map, markers, Panama center
5. **Phase 2** – map interactions (drop pins, geolocation refinements)
6. **Phase 3** – Add Report form + InstantDB transactions
7. **Phase 4** – Report list & detail views
8. **Phase 5** – Photo upload pipeline, verification workflow
9. **Phase 6** – Categories + filters
10. **Phase 7** – Responsive layout polish

Refer to this doc when updating `thoughts/plans/` feature plans to ensure alignment with long-term roadmap.
